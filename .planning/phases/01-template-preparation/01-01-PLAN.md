---
phase: 01-template-preparation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - 02-worktrees/00-experiments/README.md
autonomous: true

must_haves:
  truths:
    - "README.md exists on the 00-experiments branch with template content (not empty)"
    - "Template uses $placeholder variables that string.Template can substitute"
    - "Template includes all required sections: project name, description, what it does, how to run, status"
    - "Template contains a sentinel comment <!-- TEMPLATE: REPLACE ME --> for downstream tooling detection"
    - "pyproject.toml readme = README.md reference now resolves to a real file"
  artifacts:
    - path: "README.md (on 00-experiments branch)"
      provides: "Inheritable README template for all new project branches"
      contains: "$project_name, $description, $branch_name, $created_date, <!-- TEMPLATE: REPLACE ME -->"
  key_links:
    - from: "README.md $project_name"
      to: "Phase 2 string.Template.safe_substitute() dict key"
      via: "Variable name match"
      pattern: "\\$project_name"
    - from: "README.md sentinel comment"
      to: "Phase 2 idempotency check"
      via: "Sentinel presence/absence detection"
      pattern: "<!-- TEMPLATE: REPLACE ME -->"
---

<objective>
Create a README.md template on the `00-experiments` branch with `$placeholder` variables and a sentinel comment, so every new project branch inherits a structured, populatable starting point.

Purpose: Phase 2 (Branch Creation Flow) depends on this template existing. Without it, new branches inherit nothing to populate â€” GSD would have to generate a README from scratch every time. The template establishes consistent structure and enables `string.Template.safe_substitute()` for population.

Output: A committed `README.md` on the `00-experiments` branch with `$placeholder` syntax and a sentinel comment for idempotency detection.
</objective>

<execution_context>
@/Users/progressedd/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/progressedd/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/research/SUMMARY.md
@.planning/research/FEATURES.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create README.md template on 00-experiments branch</name>
  <files>02-worktrees/00-experiments/README.md</files>
  <action>
Write the README.md template in the existing 00-experiments worktree at `02-worktrees/00-experiments/README.md`. The file already exists but is empty (0 bytes).

Use Python `string.Template` `$placeholder` syntax for all variable fields. The placeholder variable names MUST be exactly these (Phase 2 will use these as dict keys in `string.Template.safe_substitute()`):
- `$project_name` â€” the human-readable project name (used in heading and description)
- `$description` â€” one-line project description
- `$branch_name` â€” the git branch name (used in getting started path)
- `$created_date` â€” ISO date of creation (YYYY-MM-DD)

Include a sentinel comment on the FIRST line: `<!-- TEMPLATE: REPLACE ME -->` â€” this is how Phase 2 detects whether a README is still a template vs already populated. Phase 2 will remove this line after substitution.

Template structure (required sections per TMPL-02):

```markdown
<!-- TEMPLATE: REPLACE ME -->
# $project_name

$description

## What This Does

> Replace this section with what your experiment/feature does and why it exists.

## Getting Started

1. `cd 02-worktrees/$branch_name`
2. `uv sync` (if venv not yet created)
3. Start coding

## Dependencies

See `pyproject.toml` for project dependencies. Add new deps with:

```
uv add <package-name>
```

## Status

**Created:** $created_date
**Branch:** `$branch_name`
**Status:** ðŸŸ¢ Active
```

IMPORTANT: Do NOT use `${variable}` syntax â€” use bare `$variable` syntax. Python's `string.Template` supports both, but bare `$` is cleaner in markdown and avoids confusion with shell variable syntax.

After writing the file, commit it on the 00-experiments branch:
```bash
git -C 02-worktrees/00-experiments add README.md
git -C 02-worktrees/00-experiments commit -m "add README template with placeholder variables"
```

Use the repo's commit convention: lowercase, imperative, no conventional commit prefix.
  </action>
  <verify>
1. File exists and is non-empty: `test -s 02-worktrees/00-experiments/README.md && echo "OK"`
2. Sentinel present: `grep -c 'TEMPLATE: REPLACE ME' 02-worktrees/00-experiments/README.md` returns 1
3. All placeholders present: `grep -c '\$project_name\|\$description\|\$branch_name\|\$created_date' 02-worktrees/00-experiments/README.md` returns at least 4
4. Committed: `git -C 02-worktrees/00-experiments log -1 --oneline` shows the new commit
5. No `${...}` syntax used: `grep -c '\${' 02-worktrees/00-experiments/README.md` returns 0
  </verify>
  <done>
README.md on 00-experiments contains the sentinel comment, all 4 placeholder variables ($project_name, $description, $branch_name, $created_date), and all required sections (name, description, what it does, how to run, status). The file is committed on the 00-experiments branch.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify template is inheritable by new branches</name>
  <files>02-worktrees/00-experiments/README.md</files>
  <action>
Validate that the README.md template will work correctly for Phase 2 by running these checks:

1. **string.Template parse test** â€” Run a quick Python one-liner to confirm all placeholders are valid `string.Template` identifiers:
```bash
python3 -c "
from string import Template
content = open('02-worktrees/00-experiments/README.md').read()
t = Template(content)
# safe_substitute won't raise on missing keys â€” just leaves them
result = t.safe_substitute(project_name='Test Project', description='A test', branch_name='test-branch', created_date='2026-01-01')
assert '\$project_name' not in result, 'project_name not substituted'
assert '\$description' not in result, 'description not substituted'
assert '\$branch_name' not in result, 'branch_name not substituted'
assert '\$created_date' not in result, 'created_date not substituted'
assert '<!-- TEMPLATE: REPLACE ME -->' in result, 'sentinel missing'
print('All placeholders substitute correctly')
print('Sentinel comment present')
print('Template is valid for Phase 2')
"
```

2. **pyproject.toml cross-check** â€” Verify that `pyproject.toml` still references `readme = "README.md"`:
```bash
python3 -c "
import tomllib
with open('02-worktrees/00-experiments/pyproject.toml', 'rb') as f:
    data = tomllib.load(f)
assert data['project']['readme'] == 'README.md', 'readme field mismatch'
print('pyproject.toml readme field: OK')
"
```

3. **Git status clean** â€” Confirm no uncommitted changes remain:
```bash
git -C 02-worktrees/00-experiments status --porcelain
```
Should return empty (no output).
  </action>
  <verify>
1. Python string.Template test passes with zero assertion errors
2. pyproject.toml cross-check passes
3. `git -C 02-worktrees/00-experiments status --porcelain` returns empty output
  </verify>
  <done>
Template is confirmed valid: all 4 placeholders substitute correctly via string.Template.safe_substitute(), sentinel comment is preserved, pyproject.toml readme reference is consistent, and the working tree is clean.
  </done>
</task>

</tasks>

<verification>
Phase 1 is complete when:
1. `git -C 02-worktrees/00-experiments show HEAD:README.md` outputs the template content (not empty)
2. The template contains the sentinel `<!-- TEMPLATE: REPLACE ME -->` on line 1
3. All 4 `$placeholder` variables are present: `$project_name`, `$description`, `$branch_name`, `$created_date`
4. All required sections exist: project name (heading), description, what it does, how to run (getting started), status
5. `string.Template.safe_substitute()` successfully replaces all placeholders
6. The 00-experiments branch has a clean commit with the template
</verification>

<success_criteria>
- README.md template committed on 00-experiments branch
- Template uses $placeholder syntax compatible with Python string.Template
- All required sections present (TMPL-01 + TMPL-02 satisfied)
- Sentinel comment enables idempotency detection for Phase 2
- Phase 2 can branch from 00-experiments and inherit the template
</success_criteria>

<output>
After completion, create `.planning/phases/01-template-preparation/01-01-SUMMARY.md`
</output>
