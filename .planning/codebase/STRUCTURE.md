# Codebase Structure

**Analysis Date:** 2026-02-26

## Directory Layout

```text
dougpt/
├── src/                      # Reusable Python package code
├── 00-supporting-files/      # Versioned artifacts, sample data, images, reports
├── 00-dev-log/               # Dated development notes
├── 01-dev-onboarding/        # Git submodule mountpoint
├── 02-worktrees/             # Worktree documentation and local experiment worktrees
├── .planning/codebase/       # Generated codebase mapping documents
├── .foam/templates/          # Note templates
├── .gitmodules               # Submodule declarations
├── .gitignore                # Ignore and workspace hygiene rules
└── README.md                 # Repository overview and setup notes
```

## Directory Purposes

**`src/`:**
- Purpose: Home for reusable Python source modules.
- Contains: Package directory `src/transcription/`.
- Key files: `src/transcription/models.py`, `src/transcription/__init__.py`.

**`00-supporting-files/`:**
- Purpose: Store project artifacts and reference assets used by experiments/pipelines.
- Contains: `00-supporting-files/data/` datasets and outputs, `00-supporting-files/images/` snapshots.
- Key files: `00-supporting-files/data/audio-extraction-review/segments/segments.json`, `00-supporting-files/data/audio-extraction-review/segments/segments.md`.

**`00-dev-log/`:**
- Purpose: Chronological engineering logs.
- Contains: Date-stamped Markdown entries.
- Key files: `00-dev-log/2026-02-09.md`, `00-dev-log/00-template.md`.

**`02-worktrees/`:**
- Purpose: Document and host git worktrees for parallel development.
- Contains: `02-worktrees/README.md` plus locally created worktree directories (mostly ignored by git).
- Key files: `02-worktrees/README.md`, tracked notebook `02-worktrees/audio-extraction-review/audio-extraction.ipynb`.

## Key File Locations

**Entry Points:**
- `02-worktrees/audio-extraction-review/audio-extraction.ipynb`: Notebook entrypoint for extraction/transcription/segmentation pipeline execution.
- `src/transcription/__init__.py`: Python package import entrypoint for transcript schema types.

**Configuration:**
- `README.md`: Setup and submodule initialization instructions.
- `.gitignore`: Ignore policy, including worktree contents and Python artifacts.
- `.gitmodules`: Submodule binding for `01-dev-onboarding`.

**Core Logic:**
- `src/transcription/models.py`: Transcript domain models and metadata contracts.
- `02-worktrees/audio-extraction-review/audio-extraction.ipynb`: Stage functions and run orchestration.

**Testing:**
- Not detected: no `tests/` directory and no tracked `*.test.py`/`test_*.py` files in this worktree.

## Naming Conventions

**Files:**
- Python modules use `snake_case.py` (`src/transcription/models.py`).
- Organizational top-level directories use numeric prefixes (`00-dev-log/`, `00-supporting-files/`, `02-worktrees/`).
- Log/docs use date or run-ID naming (`00-dev-log/2026-02-09.md`, `00-supporting-files/data/audio-extraction-review/runs/run-20260222T030354Z-206b1285.json`).

**Directories:**
- Domain packages use lowercase names (`src/transcription/`).
- Artifact directories are stage-oriented (`00-supporting-files/data/audio-extraction-review/logs/`, `00-supporting-files/data/audio-extraction-review/transcripts/`, `00-supporting-files/data/audio-extraction-review/segments/`).

## Where to Add New Code

**New Feature:**
- Primary code: Add new reusable modules under `src/` (for example `src/<domain>/`), following `src/transcription/` package structure.
- Tests: Create a new `tests/` directory at repo root (for example `tests/transcription/`) because no test directory is currently present.

**New Component/Module:**
- Implementation: Place domain-specific typed models in `src/<domain>/models.py` and re-export public symbols in `src/<domain>/__init__.py`.

**Utilities:**
- Shared helpers: Place shared Python helpers under a dedicated package in `src/` (for example `src/common/` or `src/utils/`) rather than embedding reusable logic in notebooks.

## Special Directories

**`02-worktrees/`:**
- Purpose: Local multi-branch working directories and worktree instructions.
- Generated: Yes (worktree contents are locally generated by `git worktree add`).
- Committed: Partially (`02-worktrees/README.md` and one tracked notebook are committed; most contents are ignored by `.gitignore`).

**`01-dev-onboarding/`:**
- Purpose: External onboarding content mounted as a git submodule.
- Generated: No.
- Committed: Yes (submodule reference committed via `.gitmodules`; submodule content lives in external repository).

**`.planning/codebase/`:**
- Purpose: Generated architecture/stack/conventions/concerns mapping docs for GSD workflows.
- Generated: Yes.
- Committed: Yes when mapping outputs are staged and committed.

---

*Structure analysis: 2026-02-26*
